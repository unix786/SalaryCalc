jQuery(()=>{var e=jQuery(".grid"),t={show:{toolbar:!0,toolbarReload:!1,toolbarAdd:!0,toolbarDelete:!0,toolbarSave:!0,toolbarEdit:!0,footer:!0},reorderColumns:!0,textSearch:"contains",parser:function(e){return JSON.parse(e)}},o=jQuery("input[name = '__RequestVerificationToken'");o.length&&(t.antiForgeryToken={__RequestVerificationToken:o.val()});for(var r=0;r<e.length;r++){var n=e[r],a=n.getAttribute("data-options"),i=jQuery.extend({},t);i.name=n.id,a&&jQuery.extend(!0,i,JSON.parse(a));var d=jQuery(n).w2grid(i);d.on("add",l),d.on("edit",l)}function l(e){var t=this,o=t.box.getAttribute("data-detail-url");if(o){e.recid&&(o=o+"?id="+e.recid);var r=jQuery('<div class="overlay"><iframe class="window hidden" src="'+o+'"></iframe></div>');r.appendTo("body");var n=r.find("iframe"),a=n[0],i=!1,d=function(){r.remove(),i&&t.reload()};r.on("click",d),n.on("load ",()=>{var e=a.contentDocument||a.contentWindow.document;jQuery(e).on("click",e=>"HTML"==e.target.tagName?d():null),jQuery(a.contentWindow).on("close",()=>jQuery(a).hide());var t=jQuery(e).find("button.cancel");t.on("click",d),t.show(),jQuery(e).find("input[type=submit]").on("click",()=>i=!0),jQuery(a).show()})}else e.isCancelled=!0}var u=w2ui.employeeList;u&&u.toolbar.add({type:"button",id:"testButton",caption:"Add test data",onClick:function(e){w2confirm(e.item.text+"?").yes(()=>{u.lock("",!0),jQuery.ajax({method:"POST",url:"/Home/AddTestData",complete:()=>{u.unlock(),u.reload()}})})}})});